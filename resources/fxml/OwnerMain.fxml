<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="540.0" prefWidth="960.0" styleClass="main-root" stylesheets="@../css/style.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.OwnerMainController">
   
   <!-- TOP: Owner Dashboard Bar -->
   <top>
      <HBox alignment="CENTER_LEFT" prefHeight="70.0" spacing="20.0" styleClass="top-bar" BorderPane.alignment="CENTER">
         <padding>
            <Insets left="25.0" right="25.0" />
         </padding>
         <children>
            <!-- Icon & Title -->
            <Label text="ðŸ‘”">
               <font>
                  <Font name="Arial" size="30.0" />
               </font>
            </Label>
            <Label text="Owner Dashboard" textFill="WHITE">
               <font>
                  <Font name="Arial Black" size="22.0" />
               </font>
            </Label>
            
            <Region HBox.hgrow="ALWAYS" />
            
            <!-- Stats Display -->
            <HBox spacing="25.0">
               <children>
                  <VBox alignment="CENTER" spacing="3.0">
                     <children>
                        <Label text="ðŸ’° Revenue" textFill="WHITE">
                           <font>
                              <Font name="Arial" size="11.0" />
                           </font>
                        </Label>
                        <Label text="12,450â‚º" textFill="#fee140">
                           <font>
                              <Font name="Arial Black" size="15.0" />
                           </font>
                        </Label>
                     </children>
                  </VBox>
                  
                  <VBox alignment="CENTER" spacing="3.0">
                     <children>
                        <Label text="ðŸ“¦ Orders" textFill="WHITE">
                           <font>
                              <Font name="Arial" size="11.0" />
                           </font>
                        </Label>
                        <Label text="156" textFill="#fee140">
                           <font>
                              <Font name="Arial Black" size="15.0" />
                           </font>
                        </Label>
                     </children>
                  </VBox>
               </children>
            </HBox>
            
            <!-- Messages Button -->
            <Button fx:id="messagesButton" mnemonicParsing="false" onAction="#handleOpenMessages" prefHeight="36.0" prefWidth="120.0" styleClass="menu-btn-primary" text="ðŸ’¬ Messages">
               <font>
                  <Font name="Arial" size="13.0" />
               </font>
            </Button>

            <!-- Logout Button -->
            <Button fx:id="logoutButton" mnemonicParsing="false" onAction="#handleLogout" styleClass="logout-btn" text="Logout">
               <font>
                  <Font name="Arial Bold" size="14.0" />
               </font>
            </Button>
         </children>
      </HBox>
   </top>
   
   <!-- CENTER: Management Tabs -->
   <center>
      <TabPane prefHeight="470.0" prefWidth="960.0" tabClosingPolicy="UNAVAILABLE" BorderPane.alignment="CENTER">
         <tabs>
            <!-- TAB 1: Products Management -->
            <Tab text="ðŸ¥¬ Products">
               <content>
                  <VBox spacing="18.0">
                     <padding>
                        <Insets bottom="22.0" left="22.0" right="22.0" top="22.0" />
                     </padding>
                     <children>
                        <!-- Header -->
                        <HBox alignment="CENTER_LEFT" spacing="15.0">
                           <children>
                              <Label text="ðŸ“¦">
                                 <font>
                                    <Font name="Arial" size="24.0" />
                                 </font>
                              </Label>
                              <VBox spacing="3.0">
                                 <children>
                                    <Label text="Product Management" textFill="#2c3e50">
                                       <font>
                                          <Font name="Arial Black" size="18.0" />
                                       </font>
                                    </Label>
                                    <Label text="Add, edit, or remove products from inventory" textFill="#7f8c8d">
                                       <font>
                                          <Font name="Arial" size="12.0" />
                                       </font>
                                    </Label>
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                        
                        <!-- Product Table -->
                        <TableView fx:id="productTable" prefHeight="280.0" styleClass="cart-table" VBox.vgrow="ALWAYS">
                           <columns>
                              <TableColumn fx:id="productIdColumn" prefWidth="60.0" text="ID" />
                              <TableColumn fx:id="productNameColumn" prefWidth="220.0" text="Product Name" />
                              <TableColumn fx:id="productTypeColumn" prefWidth="130.0" text="Type" />
                              <TableColumn fx:id="productPriceColumn" prefWidth="130.0" text="Price (â‚º/kg)" />
                              <TableColumn fx:id="productStockColumn" prefWidth="130.0" text="Stock (kg)" />
                              <TableColumn fx:id="productThresholdColumn" prefWidth="145.0" text="Threshold (kg)" />
                           </columns>
                        </TableView>
                        
                        <!-- Action Buttons -->
                        <HBox alignment="CENTER_LEFT" spacing="12.0">
                           <children>
                              <Button fx:id="addProductButton" mnemonicParsing="false" onAction="#handleAddProduct" prefHeight="45.0" prefWidth="150.0" styleClass="checkout-btn" text="âž• Add Product">
                                 <font>
                                    <Font name="Arial Bold" size="13.0" />
                                 </font>
                              </Button>
                              
                              <Button fx:id="editProductButton" mnemonicParsing="false" onAction="#handleEditProduct" prefHeight="45.0" prefWidth="150.0" styleClass="menu-btn-primary" text="âœï¸ Edit Product">
                                 <font>
                                    <Font name="Arial Bold" size="13.0" />
                                 </font>
                              </Button>
                              
                              <Button fx:id="deleteProductButton" mnemonicParsing="false" onAction="#handleDeleteProduct" prefHeight="45.0" prefWidth="160.0" styleClass="remove-btn" text="ðŸ—‘ï¸ Delete Product">
                                 <font>
                                    <Font name="Arial Bold" size="13.0" />
                                 </font>
                              </Button>
                              
                              <Region HBox.hgrow="ALWAYS" />
                              
                              <Label text="ðŸ’¡ Threshold triggers price doubling" textFill="#e67e22">
                                 <font>
                                    <Font name="Arial Italic" size="11.0" />
                                 </font>
                              </Label>
                           </children>
                        </HBox>
                     </children>
                  </VBox>
               </content>
            </Tab>
            
            <!-- TAB 2: Orders Management -->
            <Tab text="ðŸ“¦ Orders">
               <content>
                  <VBox spacing="18.0">
                     <padding>
                        <Insets bottom="22.0" left="22.0" right="22.0" top="22.0" />
                     </padding>
                     <children>
                        <!-- Header -->
                        <HBox alignment="CENTER_LEFT" spacing="15.0">
                           <children>
                              <Label text="ðŸ“‹">
                                 <font>
                                    <Font name="Arial" size="24.0" />
                                 </font>
                              </Label>
                              <VBox spacing="3.0" HBox.hgrow="ALWAYS">
                                 <children>
                                    <Label text="All Orders Overview" textFill="#2c3e50">
                                       <font>
                                          <Font name="Arial Black" size="18.0" />
                                       </font>
                                    </Label>
                                    <Label text="Monitor all customer orders and delivery status" textFill="#7f8c8d">
                                       <font>
                                          <Font name="Arial" size="12.0" />
                                       </font>
                                    </Label>
                                 </children>
                              </VBox>
                              
                              <!-- Quick Stats -->
                              <HBox spacing="15.0">
                                 <children>
                                    <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: rgba(46, 204, 113, 0.2);                                                  -fx-background-radius: 10;                                                  -fx-padding: 8;">
                                       <children>
                                          <Label text="âœ… Completed" textFill="#27ae60">
                                             <font>
                                                <Font name="Arial Bold" size="10.0" />
                                             </font>
                                          </Label>
                                          <Label text="89" textFill="#27ae60">
                                             <font>
                                                <Font name="Arial Black" size="14.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                    
                                    <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: rgba(241, 196, 15, 0.2);                                                  -fx-background-radius: 10;                                                  -fx-padding: 8;">
                                       <children>
                                          <Label text="ðŸšš In Transit" textFill="#f39c12">
                                             <font>
                                                <Font name="Arial Bold" size="10.0" />
                                             </font>
                                          </Label>
                                          <Label text="23" textFill="#f39c12">
                                             <font>
                                                <Font name="Arial Black" size="14.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                    
                                    <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: rgba(52, 152, 219, 0.2);                                                  -fx-background-radius: 10;                                                  -fx-padding: 8;">
                                       <children>
                                          <Label text="â³ Pending" textFill="#3498db">
                                             <font>
                                                <Font name="Arial Bold" size="10.0" />
                                             </font>
                                          </Label>
                                          <Label text="44" textFill="#3498db">
                                             <font>
                                                <Font name="Arial Black" size="14.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                           </children>
                        </HBox>
                        
                        <!-- Order Table -->
                        <TableView fx:id="orderTable" prefHeight="345.0" styleClass="cart-table" VBox.vgrow="ALWAYS">
                           <columns>
                              <TableColumn fx:id="orderIdColumn" prefWidth="100.0" text="Order ID" />
                              <TableColumn fx:id="orderCustomerColumn" prefWidth="200.0" text="Customer" />
                              <TableColumn fx:id="orderDateColumn" prefWidth="170.0" text="Order Date" />
                              <TableColumn fx:id="orderTotalColumn" prefWidth="130.0" text="Total (â‚º)" />
                              <TableColumn fx:id="orderStatusColumn" prefWidth="175.0" text="Status" />
                           </columns>
                        </TableView>
                     </children>
                  </VBox>
               </content>
            </Tab>
            
            <!-- TAB 3: Carriers Management -->
            <Tab text="ðŸšš Carriers">
               <content>
                  <VBox spacing="18.0">
                     <padding>
                        <Insets bottom="22.0" left="22.0" right="22.0" top="22.0" />
                     </padding>
                     <children>
                        <!-- Header -->
                        <HBox alignment="CENTER_LEFT" spacing="15.0">
                           <children>
                              <Label text="ðŸ‘¥">
                                 <font>
                                    <Font name="Arial" size="24.0" />
                                 </font>
                              </Label>
                              <VBox spacing="3.0">
                                 <children>
                                    <Label text="Carrier Management" textFill="#2c3e50">
                                       <font>
                                          <Font name="Arial Black" size="18.0" />
                                       </font>
                                    </Label>
                                    <Label text="Hire carriers and monitor their performance" textFill="#7f8c8d">
                                       <font>
                                          <Font name="Arial" size="12.0" />
                                       </font>
                                    </Label>
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                        
                        <!-- Carrier Table -->
                        <TableView fx:id="carrierTable" prefHeight="280.0" styleClass="cart-table" VBox.vgrow="ALWAYS">
                           <columns>
                              <TableColumn fx:id="carrierIdColumn" prefWidth="80.0" text="ID" />
                              <TableColumn fx:id="carrierNameColumn" prefWidth="220.0" text="Carrier Name" />
                              <TableColumn fx:id="carrierPhoneColumn" prefWidth="180.0" text="Phone" />
                              <TableColumn fx:id="carrierRatingColumn" prefWidth="140.0" text="Rating" />
                              <TableColumn fx:id="carrierDeliveriesColumn" prefWidth="155.0" text="Deliveries" />
                           </columns>
                        </TableView>
                        
                        <!-- Action Buttons -->
                        <HBox alignment="CENTER_LEFT" spacing="12.0">
                           <children>
                              <Button mnemonicParsing="false" onAction="#handleEmployCarrier" prefHeight="45.0" prefWidth="170.0" styleClass="checkout-btn" text="âž• Employ Carrier">
                                 <font>
                                    <Font name="Arial Bold" size="13.0" />
                                 </font>
                              </Button>
                              
                              <Button mnemonicParsing="false" onAction="#handleFireCarrier" prefHeight="45.0" prefWidth="160.0" styleClass="remove-btn" text="ðŸš« Fire Carrier">
                                 <font>
                                    <Font name="Arial Bold" size="13.0" />
                                 </font>
                              </Button>
                              
                              <Region HBox.hgrow="ALWAYS" />
                              
                              <Label text="â­ Average Rating: 4.7/5.0" textFill="#f39c12">
                                 <font>
                                    <Font name="Arial Bold" size="13.0" />
                                 </font>
                              </Label>
                           </children>
                        </HBox>
                     </children>
                  </VBox>
               </content>
            </Tab>
            
            <!-- TAB 4: Reports & Analytics -->
            <Tab text="ðŸ“Š Analytics">
               <content>
                  <ScrollPane fitToWidth="true" prefViewportHeight="420.0" vbarPolicy="AS_NEEDED" hbarPolicy="NEVER" pannable="true">
                     <content>
                        <VBox alignment="CENTER" spacing="30.0" prefWidth="880.0">
                           <padding>
                              <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
                           </padding>
                           <children>
                              <!-- Title -->
                              <VBox alignment="CENTER" spacing="8.0">
                                 <children>
                                    <Label text="ðŸ“ˆ">
                                       <font>
                                          <Font name="Arial" size="36.0" />
                                       </font>
                                    </Label>
                                    <Label text="Business Analytics Dashboard" textFill="#2c3e50">
                                       <font>
                                          <Font name="Arial Black" size="22.0" />
                                       </font>
                                    </Label>
                                    <Label text="Monitor your business performance in real-time" textFill="#7f8c8d">
                                       <font>
                                          <Font name="Arial" size="13.0" />
                                       </font>
                                    </Label>
                                 </children>
                              </VBox>
                              
                              <!-- Stats Cards Row -->
                              <HBox alignment="CENTER" spacing="30.0">
                                 <children>
                                    <!-- Total Sales Card -->
                                    <VBox alignment="CENTER" spacing="15.0" styleClass="info-card">
                                       <padding>
                                          <Insets bottom="30.0" left="40.0" right="40.0" top="30.0" />
                                       </padding>
                                       <children>
                                          <Label text="ðŸ’°" textFill="WHITE">
                                             <font>
                                                <Font name="Arial" size="36.0" />
                                             </font>
                                          </Label>
                                          <Label text="Total Sales" textFill="#d04acc">
                                             <font>
                                                <Font name="Arial Bold" size="15.0" />
                                             </font>
                                          </Label>
                                          <Label text="12,450â‚º" textFill="#7894c3">
                                             <font>
                                                <Font name="Arial Black" size="26.0" />
                                             </font>
                                          </Label>
                                          <Label text="+18% this month" textFill="#b2981a">
                                             <font>
                                                <Font name="Arial" size="11.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                    
                                    <!-- Orders Today Card -->
                                    <VBox alignment="CENTER" spacing="15.0" styleClass="info-card">
                                       <padding>
                                          <Insets bottom="30.0" left="40.0" right="40.0" top="30.0" />
                                       </padding>
                                       <children>
                                          <Label text="ðŸ“¦" textFill="WHITE">
                                             <font>
                                                <Font name="Arial" size="36.0" />
                                             </font>
                                          </Label>
                                          <Label text="Orders Today" textFill="#d04acc">
                                             <font>
                                                <Font name="Arial Bold" size="15.0" />
                                             </font>
                                          </Label>
                                          <Label text="23" textFill="#7894c3">
                                             <font>
                                                <Font name="Arial Black" size="26.0" />
                                             </font>
                                          </Label>
                                          <Label text="+12% vs yesterday" textFill="#b2981a">
                                             <font>
                                                <Font name="Arial" size="11.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                    
                                    <!-- Active Customers Card -->
                                    <VBox alignment="CENTER" spacing="15.0" styleClass="info-card">
                                       <padding>
                                          <Insets bottom="30.0" left="40.0" right="40.0" top="30.0" />
                                       </padding>
                                       <children>
                                          <Label text="ðŸ‘¥" textFill="WHITE">
                                             <font>
                                                <Font name="Arial" size="36.0" />
                                             </font>
                                          </Label>
                                          <Label text="Active Customers" textFill="#d04acc">
                                             <font>
                                                <Font name="Arial Bold" size="15.0" />
                                             </font>
                                          </Label>
                                          <Label text="156" textFill="#7894c3">
                                             <font>
                                                <Font name="Arial Black" size="26.0" />
                                             </font>
                                          </Label>
                                          <Label text="+25 new this week" textFill="#b2981a">
                                             <font>
                                                <Font name="Arial" size="11.0" />
                                             </font>
                                          </Label>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>
                              
                              <!-- Charts Row -->
                              <HBox alignment="CENTER" spacing="30.0">
                                 <children>
                                    <!-- Pie Chart: Revenue by Product (Top 6) -->
                                    <VBox spacing="8.0" alignment="TOP_CENTER" VBox.vgrow="ALWAYS">
                                       <children>
                                          <Label text="Revenue by Product" textFill="#2c3e50">
                                             <font>
                                                <Font name="Arial Bold" size="14.0" />
                                             </font>
                                          </Label>
                                          <PieChart fx:id="revenueByProductPie" prefHeight="260.0" prefWidth="360.0" />
                                       </children>
                                    </VBox>

                                    <!-- Bar Chart: Daily Revenue (last 7 days) -->
                                    <VBox spacing="8.0" alignment="TOP_CENTER" VBox.vgrow="ALWAYS">
                                       <children>
                                          <Label text="Daily Revenue (7 days)" textFill="#2c3e50">
                                             <font>
                                                <Font name="Arial Bold" size="14.0" />
                                             </font>
                                          </Label>
                                          <BarChart fx:id="dailyRevenueBar" prefHeight="260.0" prefWidth="480.0">
                                             <xAxis>
                                                <CategoryAxis />
                                             </xAxis>
                                             <yAxis>
                                                <NumberAxis />
                                             </yAxis>
                                          </BarChart>
                                       </children>
                                    </VBox>
                                 </children>
                              </HBox>

                        <!-- More Charts Row -->
                        <HBox alignment="CENTER" spacing="30.0">
                           <children>
                              <!-- Top Products by Quantity -->
                              <VBox spacing="8.0" alignment="TOP_CENTER" VBox.vgrow="ALWAYS">
                                 <children>
                                    <Label text="Top Products by Quantity" textFill="#2c3e50">
                                       <font>
                                          <Font name="Arial Bold" size="14.0" />
                                       </font>
                                    </Label>
                                    <BarChart fx:id="topProductsBar" prefHeight="240.0" prefWidth="360.0">
                                       <xAxis>
                                          <CategoryAxis />
                                       </xAxis>
                                       <yAxis>
                                          <NumberAxis />
                                       </yAxis>
                                    </BarChart>
                                 </children>
                              </VBox>

                              <!-- Revenue Line Chart: last 30 days -->
                              <VBox spacing="8.0" alignment="TOP_CENTER" VBox.vgrow="ALWAYS">
                                 <children>
                                    <Label text="Revenue (30 days)" textFill="#2c3e50">
                                       <font>
                                          <Font name="Arial Bold" size="14.0" />
                                       </font>
                                    </Label>
                                    <LineChart fx:id="revenueLineChart" prefHeight="240.0" prefWidth="560.0">
                                       <xAxis>
                                          <CategoryAxis />
                                       </xAxis>
                                       <yAxis>
                                          <NumberAxis />
                                       </yAxis>
                                    </LineChart>
                                 </children>
                              </VBox>
                           </children>
                        </HBox>
                     </children>
                  </VBox>
                       </content>
                    </ScrollPane>
                 </content>
            </Tab>
         </tabs>
      </TabPane>
   </center>
   
</BorderPane>
